row_generators_module: airbnb_generators

tables:
  countries:
    vocabulary_table: true

  age_gender_bkts:
    row_generators:
      - name: generic.person.password
        columns_assigned: age_bucket
      - name: generic.column_value_provider.column_value
        args:
          - dst_db_conn
          - orm.Countries
          - '"country_destination"'
        columns_assigned: country_destination
      - name: generic.person.gender
        columns_assigned: gender

  users:
    num_rows_per_pass: 0
    row_generators:
      - name: generic.person.identifier
        kwargs:
          mask: '"@@##@@@@"'
        columns_assigned: id
      - name: airbnb_generators.user_dates_provider
        columns_assigned: ["date_account_created", "date_first_booking"]
      - name: airbnb_generators.user_age_provider
        kwargs:
          query_results: SRC_STATS["age_stats"]
        columns_assigned: age
      - name: generic.choice
        args:
          - ["Mac Desktop", "Windows Desktop", "iPhone"]
        columns_assigned: first_device_type

  sessions:
    num_rows_per_pass: 0
    row_generators:
      - name: generic.numeric.integer_number
        kwargs:
          start: 0
          end: 3600
        columns_assigned: secs_elapsed
      - name: generic.choice
        args:
          - ["show", "index", "personalize"]
        columns_assigned: action
      - name: generic.choice
        args:
          - ["view", "data", "click"]
        columns_assigned: action_type
      - name: generic.choice
        args:
          - ["view_search_results", "user_profile", "similar_listings"]
        columns_assigned: action_detail
      - name: generic.choice
        args:
          - ["Mac Desktop", "Windows Desktop", "iPhone"]
        columns_assigned: device_type
smartnoise-sql:
  public:
    users:
      age:
        type: float
        private_id: false
        lower: 0
        upper: 100
      id:
        type: string
        private_id: true

src-stats:
  - name: age_stats
    query: >
      select avg(age), stddev(age)
      from users
      where age <= 100
    epsilon: 0.1
    delta: 0.000001

story_generators_module: airbnb_generators
story_generators:
  - name: airbnb_generators.session_story
    num_stories_per_pass: 30
